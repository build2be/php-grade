{"filename":"src\/Parsers\/PhpDependParser.php","lines":[{"nr":1,"line":"<?php","msg":[]},{"nr":2,"line":"\/**","msg":[]},{"nr":3,"line":" * Created by PhpStorm.","msg":[]},{"nr":4,"line":" * User: martijn","msg":[]},{"nr":5,"line":" * Date: 27-6-14","msg":[]},{"nr":6,"line":" * Time: 10:29","msg":[]},{"nr":7,"line":" *\/","msg":[{"tool":"phpcs","level":2,"message":"PHP version not specified"},{"tool":"phpcs","level":2,"message":"Missing @category tag in file comment"},{"tool":"phpcs","level":2,"message":"Missing @package tag in file comment"},{"tool":"phpcs","level":2,"message":"Missing @author tag in file comment"},{"tool":"phpcs","level":2,"message":"Missing @license tag in file comment"},{"tool":"phpcs","level":2,"message":"Missing @link tag in file comment"}]},{"nr":8,"line":"","msg":[]},{"nr":9,"line":"namespace PhpGrade\\Parsers;","msg":[]},{"nr":10,"line":"","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":11,"line":"","msg":[]},{"nr":12,"line":"use PhpGrade\\Config;","msg":[]},{"nr":13,"line":"use PhpGrade\\Message;","msg":[]},{"nr":14,"line":"use Symfony\\Component\\Process\\Process;","msg":[]},{"nr":15,"line":"","msg":[]},{"nr":16,"line":"class PhpDependParser extends BaseParser implements ParserInterface","msg":[{"tool":"phpcs","level":2,"message":"Missing class doc comment"},{"tool":"phpdcd","level":0,"message":"87 lines of dead code"},{"tool":"phpdcd","level":0,"message":"5 lines of dead code"},{"tool":"phpdcd","level":0,"message":"10 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"87 lines of dead code"},{"tool":"phpdcd","level":0,"message":"5 lines of dead code"},{"tool":"phpdcd","level":0,"message":"10 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"87 lines of dead code"},{"tool":"phpdcd","level":0,"message":"5 lines of dead code"},{"tool":"phpdcd","level":0,"message":"10 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"}]},{"nr":17,"line":"{","msg":[{"tool":"phpdcd","level":0,"message":"11 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"11 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"11 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":18,"line":"","msg":[]},{"nr":19,"line":"    public function run($file)","msg":[{"tool":"phpcs","level":2,"message":"Missing function doc comment"},{"tool":"phpdcd","level":0,"message":"18 lines of dead code"}]},{"nr":20,"line":"    {","msg":[{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"}]},{"nr":21,"line":"        \/\/ pdepend --summary-xml=$2 $1","msg":[{"tool":"phpdcd","level":0,"message":"14 lines of dead code"},{"tool":"phpdcd","level":0,"message":"21 lines of dead code"},{"tool":"phpdcd","level":0,"message":"14 lines of dead code"},{"tool":"phpdcd","level":0,"message":"21 lines of dead code"},{"tool":"phpdcd","level":0,"message":"14 lines of dead code"},{"tool":"phpdcd","level":0,"message":"21 lines of dead code"}]},{"nr":22,"line":"        $builder = $this->getBuilder('pdepend');","msg":[{"tool":"phpdcd","level":0,"message":"10 lines of dead code"},{"tool":"phpdcd","level":0,"message":"10 lines of dead code"},{"tool":"phpdcd","level":0,"message":"10 lines of dead code"}]},{"nr":23,"line":"        $randomFile = microtime();","msg":[{"tool":"phpdcd","level":0,"message":"27 lines of dead code"},{"tool":"phpdcd","level":0,"message":"27 lines of dead code"},{"tool":"phpdcd","level":0,"message":"27 lines of dead code"}]},{"nr":24,"line":"        $builder->setArguments(array('--summary-xml=\"\/tmp\/' . $randomFile . '\"', $file));","msg":[{"tool":"phpcs","level":2,"message":"Line exceeds 85 characters; contains 89 characters"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":25,"line":"","msg":[{"tool":"phpdcd","level":0,"message":"41 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"41 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"41 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":26,"line":"        $process = new Process($builder->getProcess()->getCommandLine());","msg":[{"tool":"phpmd","level":0,"message":"Avoid using static access to class '\\Symfony\\Component\\Process\\Process' in method 'run'."}]},{"nr":27,"line":"        $process->run();","msg":[{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"}]},{"nr":28,"line":"","msg":[]},{"nr":29,"line":"        \/\/ executes after the command finishes","msg":[{"tool":"phpdcd","level":0,"message":"8 lines of dead code"},{"tool":"phpdcd","level":0,"message":"8 lines of dead code"},{"tool":"phpdcd","level":0,"message":"8 lines of dead code"}]},{"nr":30,"line":"        \/\/if (!$process->isSuccessful()) {","msg":[{"tool":"phpdcd","level":0,"message":"9 lines of dead code"},{"tool":"phpdcd","level":0,"message":"9 lines of dead code"},{"tool":"phpdcd","level":0,"message":"9 lines of dead code"}]},{"nr":31,"line":"        \/\/  throw new \\RuntimeException($process->getErrorOutput());","msg":[]},{"nr":32,"line":"        \/\/}","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":33,"line":"        $process->getOutput();","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":34,"line":"        $output = file_get_contents('\/tmp\/' . $randomFile);","msg":[{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"},{"tool":"phpdcd","level":0,"message":"6 lines of dead code"}]},{"nr":35,"line":"        return $this->parseOutput($output);","msg":[]},{"nr":36,"line":"    }","msg":[{"tool":"phpdcd","level":0,"message":"31 lines of dead code"},{"tool":"phpdcd","level":0,"message":"31 lines of dead code"},{"tool":"phpdcd","level":0,"message":"31 lines of dead code"}]},{"nr":37,"line":"","msg":[]},{"nr":38,"line":"    protected function parseOutput($output)","msg":[{"tool":"phpcs","level":2,"message":"You must use \"\/**\" style comments for a function comment"},{"tool":"phpmd","level":0,"message":"The method parseOutput() has a Cyclomatic Complexity of 10. The configured cyclomatic complexity threshold is 10."},{"tool":"phpdcd","level":0,"message":"53 lines of dead code"},{"tool":"phpdcd","level":0,"message":"53 lines of dead code"}]},{"nr":39,"line":"    {","msg":[]},{"nr":40,"line":"        $output = simplexml_load_string($output);","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":41,"line":"","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":42,"line":"        \/**","msg":[]},{"nr":43,"line":"         * @var \\SimpleXmlElement $packages","msg":[]},{"nr":44,"line":"         * @var \\SimpleXmlElement $namespace","msg":[]},{"nr":45,"line":"         * @var \\SimpleXmlElement $node","msg":[]},{"nr":46,"line":"         * @var \\SimpleXmlElement $method","msg":[]},{"nr":47,"line":"         *\/","msg":[]},{"nr":48,"line":"        $packages = $output->package;","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":49,"line":"        foreach ($packages as $namespace) {","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":50,"line":"            foreach ($namespace->children() as $node) {","msg":[]},{"nr":51,"line":"                $type = (string)$node->getName();","msg":[]},{"nr":52,"line":"                if ($type == 'function') {","msg":[]},{"nr":53,"line":"                    $nodePath = $namespace['name'] . '\/' . $node['name'];","msg":[]},{"nr":54,"line":"                    $this->parseFunction($nodePath, $node);","msg":[]},{"nr":55,"line":"                }","msg":[]},{"nr":56,"line":"","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":57,"line":"                if ($type == 'class') {","msg":[{"tool":"phpdcd","level":0,"message":"15 lines of dead code"},{"tool":"phpdcd","level":0,"message":"15 lines of dead code"},{"tool":"phpdcd","level":0,"message":"15 lines of dead code"}]},{"nr":58,"line":"                    $nodePath = $namespace['name'] . '\/' . $node['name'];","msg":[]},{"nr":59,"line":"                    foreach ($node->children() as $method) {","msg":[]},{"nr":60,"line":"                        if ($method->getName() == 'method') {","msg":[]},{"nr":61,"line":"                            $nodePath .= '\/' . $method['name'];","msg":[]},{"nr":62,"line":"                            $this->parseFunction($nodePath, $method);","msg":[]},{"nr":63,"line":"                        }","msg":[]},{"nr":64,"line":"                    }","msg":[]},{"nr":65,"line":"                }","msg":[]},{"nr":66,"line":"            }","msg":[]},{"nr":67,"line":"        }","msg":[]},{"nr":68,"line":"        $result = array();","msg":[]},{"nr":69,"line":"        $config = new Config();","msg":[{"tool":"phpmd","level":0,"message":"Avoid using static access to class '\\PhpGrade\\Config' in method 'parseOutput'."}]},{"nr":70,"line":"        foreach ($package->children() as $class) {","msg":[{"tool":"phpmd","level":0,"message":"Avoid unused local variables such as '$package'."},{"tool":"phpmd","level":0,"message":"Avoid unused local variables such as '$class'."},{"tool":"phpdcd","level":0,"message":"89 lines of dead code"},{"tool":"phpdcd","level":0,"message":"89 lines of dead code"},{"tool":"phpdcd","level":0,"message":"89 lines of dead code"}]},{"nr":71,"line":"","msg":[]},{"nr":72,"line":"","msg":[]},{"nr":73,"line":"            $messageObject = new Message('phpcs');","msg":[{"tool":"phpmd","level":0,"message":"Avoid using static access to class '\\PhpGrade\\Message' in method 'parseOutput'."}]},{"nr":74,"line":"            $lineNr = (int)$phpcsMessage['line'];","msg":[]},{"nr":75,"line":"            $messageObject->setLine($lineNr);","msg":[]},{"nr":76,"line":"            $messageObject->setMessage((string)$phpcsMessage);","msg":[{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":77,"line":"","msg":[]},{"nr":78,"line":"            $severity = (int)$phpcsMessage['severity'];","msg":[]},{"nr":79,"line":"            $errorLevel = Message::LEVEL_INFO;","msg":[{"tool":"phpmd","level":0,"message":"Avoid using static access to class '\\PhpGrade\\Message' in method 'parseOutput'."}]},{"nr":80,"line":"            if ($severity >= $config->getPhpcsWarningLevel()) {","msg":[]},{"nr":81,"line":"                $errorLevel = Message::LEVEL_WARNING;","msg":[{"tool":"phpmd","level":0,"message":"Avoid using static access to class '\\PhpGrade\\Message' in method 'parseOutput'."}]},{"nr":82,"line":"            }","msg":[]},{"nr":83,"line":"            if ($severity >= $config->getPhpcsErrorLevel()) {","msg":[]},{"nr":84,"line":"                $errorLevel = Message::LEVEL_ERROR;","msg":[{"tool":"phpmd","level":0,"message":"Avoid using static access to class '\\PhpGrade\\Message' in method 'parseOutput'."},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"}]},{"nr":85,"line":"            }","msg":[]},{"nr":86,"line":"            $messageObject->setErrorLevel($errorLevel);","msg":[]},{"nr":87,"line":"            $result[$lineNr][] = $messageObject;","msg":[]},{"nr":88,"line":"        }","msg":[]},{"nr":89,"line":"        return $result;","msg":[]},{"nr":90,"line":"    }","msg":[]},{"nr":91,"line":"","msg":[]},{"nr":92,"line":"    private function parseFunction($nodePath)","msg":[{"tool":"phpcs","level":2,"message":"Missing function doc comment"},{"tool":"phpcs","level":2,"message":"Private method name \"PhpDependParser::parseFunction\" must be prefixed with an underscore"},{"tool":"phpmd","level":0,"message":"Avoid unused parameters such as '$nodePath'."},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"3 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"3 lines of dead code"},{"tool":"phpdcd","level":0,"message":"4 lines of dead code"},{"tool":"phpdcd","level":0,"message":"3 lines of dead code"}]},{"nr":93,"line":"    {","msg":[]},{"nr":94,"line":"    }","msg":[]},{"nr":95,"line":"","msg":[]},{"nr":96,"line":"} ","msg":[]}]}